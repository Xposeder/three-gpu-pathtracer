{"mappings":"05BAIaA,gBAIXC,KAAKC,aAAe,IAAIC,EAAAC,qCAITC,EAAOC,EAAU,IAEhC,MAAOJ,aAACA,GAAiBD,KACnBM,EAAS,GAEfF,EAAMG,UAAUC,IAEVA,EAAEC,QAENH,EAAOI,KAAMF,MAMf,MAAOG,SAACA,EAAQC,UAAEA,EAASC,SAAEA,GAAaC,EAAAC,YAAaT,EAAQ,CAAEU,WAAY,CAAE,WAAY,SAAU,UAAW,QAC1GC,EAAahB,EAAaiB,SAAUP,EAAU,CAAEQ,SAAUC,EAAAC,OAAQhB,EAASiB,YAAa,IAE9F,MAAO,OACNlB,YACAQ,WACAC,EACAU,UAAWN,GAKbO,UAECxB,KAAKC,aAAawB","sources":["src/core/PathTracingSceneGenerator.js"],"sourcesContent":["import { SAH } from 'three-mesh-bvh';\nimport { GenerateMeshBVHWorker } from 'three-mesh-bvh/src/workers/GenerateMeshBVHWorker.js';\nimport { mergeMeshes } from '../utils/GeometryPreparationUtils.js';\n\nexport class PathTracingSceneGenerator {\n\n\tconstructor() {\n\n\t\tthis.bvhGenerator = new GenerateMeshBVHWorker();\n\n\t}\n\n\tasync generate( scene, options = {} ) {\n\n\t\tconst { bvhGenerator } = this;\n\t\tconst meshes = [];\n\n\t\tscene.traverse( c => {\n\n\t\t\tif ( c.isMesh ) {\n\n\t\t\t\tmeshes.push( c );\n\n\t\t\t}\n\n\t\t} );\n\n\t\tconst { geometry, materials, textures } = mergeMeshes( meshes, { attributes: [ 'position', 'normal', 'tangent', 'uv' ] } );\n\t\tconst bvhPromise = bvhGenerator.generate( geometry, { strategy: SAH, ...options, maxLeafTris: 1 } );\n\n\t\treturn {\n\t\t\tscene,\n\t\t\tmaterials,\n\t\t\ttextures,\n\t\t\tbvh: await bvhPromise,\n\t\t};\n\n\t}\n\n\tdispose() {\n\n\t\tthis.bvhGenerator.terminate();\n\n\t}\n\n}\n"],"names":["$7fd338d104aaacb9$export$245b5237bb7038ea","this","bvhGenerator","$hqWxi","GenerateMeshBVHWorker","scene","options","meshes","traverse","c","isMesh","push","geometry","materials","textures","$bf8yd","mergeMeshes","attributes","bvhPromise","generate","strategy","$mNwkg","SAH","maxLeafTris","bvh","dispose","terminate"],"version":3,"file":"aoRender.047a7baa.js.map"}